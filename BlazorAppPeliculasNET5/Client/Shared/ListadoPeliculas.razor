@inject IJSRuntime js
<h3>Listado de Peliculas</h3>

	<input type="checkbox" @bind="show" /><span>Mostrar Botones</span>
	<ListadoGenerico listado="Peliculas">
		<Registros>
			<PeliculaIndividual Pelicula="context" showing=show EliminarPelicula="Eliminar"></PeliculaIndividual>
		</Registros>
	</ListadoGenerico>
	
@code {


	bool show = false;

	[Parameter]
	public List<Pelicula> Peliculas { get; set; } = null!;

	protected override void OnInitialized()
	{
		Console.WriteLine($"OnInitialized: {Peliculas.Count}");
	}

	protected override void OnParametersSet()
	{
		Console.WriteLine($"OnParametersSet: {Peliculas.Count}");
	}

	protected override void OnAfterRender(bool firstRender)
	{
		Console.WriteLine($"OnAfterRender: {firstRender}");
	}

	protected override bool ShouldRender()
	{
		Console.WriteLine("OnShouldRender");
		return true;
	}

	private async Task Eliminar(Pelicula pelicula)
	{
		var confirm = await js.Confirm($"¿Desea borrar la pelicula {pelicula.Titulo}?");
		if (confirm)
		{
			Console.WriteLine("Eliminando pelicula");
			Peliculas.Remove(pelicula);
		}

	}

	public void LimpiarPeliculas()
	{
		if(Peliculas is not null)
		{
			Peliculas.Clear();
		}
	}
}
